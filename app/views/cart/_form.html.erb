<%= form_for cart_item, remote: true, html:{class:'cart-item-form'}, data:{calculate:cart_item_calculate_path} do |f| %>

  <%= f.hidden_field :cart_id, value:cart_item.cart.id %>

  <%= render partial:"cart/#{mode}/form", locals: { mode:mode,
                                          cart_item:cart_item,
                                          categories:categories,
                                          category:category,
                                          size:size,
                                          sizes:sizes,
                                          product:product,
                                          products:products} %>
<% end %>